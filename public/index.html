<!DOCTYPE html>
<html lang="en">
  <head>
    <title>BeanBots</title>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
    />
    
    <link href="https://fonts.googleapis.com/css2?family=Raleway:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800&display=swap" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="style.css" />

    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.2/styles/default.min.css">
    
    <!-- import the webpage's javascript file -->
  </head>
  <body>
    <header class="bpy-3">
      <div class="row flex-nowrap align-items-center">
        <div class="col-2 site-name">
          <h3>BeanBots ðŸ¤–</h3>
        </div>
        <div class="col">
          
        </div>
      </div>
    </header>
    <br>
    <div class="row">
      <div class="col-5 leftside">
        <div class="notif-section">
          
          <div class="toast" role="alert" aria-live="assertive" aria-atomic="true" data-delay="4000">
            <div class="toast-header">
              <strong class="mr-auto">Notification</strong>
              <button type="button" class="ml-2 mb-1 close" data-dismiss="toast" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div id="main-toast-body" class="toast-body">
              
            </div>
          </div>
          
        </div>
        
        <div id="countdown-timer"></div>
        
        <div id="canvas"></div>
      </div>
      
      
      <div class="col-5 rightside hide competition-bar">
        <h4> Scores </h4>
        <table>
          <tr>
            <td class="scoreboard-name red-team"></td>
            <td class="scoreboard-score red-score">0</td>
          </tr>
          <tr>
            <td class="scoreboard-name blue-team"></td>
            <td class="scoreboard-score blue-score">0</td>
          </tr>
        </table>
        <hr>
        <h4> Timer </h4>
        <h1 id="timer" class="scoreboard-timer">
          00:30
        </h1>
        <hr>
        <h4> Event Log </h4>
      </div>
      
      
      
      <div class="col rightside practice-bar">
        <ul class="nav nav-tabs mb-3" id="pills-tab" role="tablist">
  <li class="nav-item">
    <a class="nav-link active" id="pills-profile-help" data-toggle="pill" href="#pills-help" role="tab" aria-controls="pills-help" aria-selected="true">Home</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" id="pills-home-tab" data-toggle="pill" href="#pills-home" role="tab" aria-controls="pills-home" aria-selected="false">Configs</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" id="pills-profile-tab" data-toggle="pill" href="#pills-profile" role="tab" aria-controls="pills-profile" aria-selected="false">Code</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" id="pills-profile-help2" data-toggle="pill" href="#pills-help2" role="tab" aria-controls="pills-help2" aria-selected="false">Documentation</a>
  </li>
          <li class="nav-item">
    <button href="#" id="join-match" class="btn btn-primary">
            Play a match!
          </button>       
  </li>
  <li class='nav-item'>
    <a href="#" class="btn btn-success runRobot">
            Run robot
          </a>         
  </li>
</ul>
<div class="tab-content" id="pills-tabContent">
  <div class="tab-pane fade" id="pills-home" role="tabpanel" aria-labelledby="pills-home-tab">

    <b>Robot name and color</b>
    <p>
      Type in a name for your robot and the color of the robot body and press <code>Update Robot</code> to confirm changes!
    </p>
      <div class="input-group">
        <a href="#" class="input-group-prepend updateRobot">
          <span class="input-group-text" id="robotBody">Update robot</span>
        </a>
        <input type="text" class="form-control" id="robotName" placeholder="Robot name">
        <input type="text" class="form-control" id="robotColor" placeholder="Robot color">
      </div>
      <b>Wheels</b>
    <p>
      Give your wheels some color and click which type you want! To take them off click on the leftmost button again.
    </p>
      <div id="user-wheels"></div>
      <b>Sensors</b>
    <p>
      Variable name is what you will use to reference the sensor. For example, if you name a color sensor <code>colorSensor</code> you can refer to it in the code by <code>robot.parts.colorSensor</code>
    </p>
      <div id="user-sensors"></div></div>
  <div class="tab-pane fade" id="pills-profile" role="tabpanel" aria-labelledby="pills-profile-tab">
  <xml xmlns="https://developers.google.com/blockly/xml" id="toolbox" style="display: none">
  <category name="Actions" colour="#5ba55b">
    <block type="normalwheels_move">
      <field name="velocity">0</field>
      <field name="time">0</field>
    </block>
    <block type="mecanumwheels_move">
      <field name="xvel">0</field>
      <field name="yvel">0</field>
      <field name="time">0</field>
    </block>
    <block type="wheels_rotate">
      <field name="velocity">0</field>
      <field name="time">0</field>
    </block>
    <block type="wait">
      <field name="time">0</field>
    </block>
  </category>
  <category name="Sensors" colour="#5ba55b"></category>
  <category name="Logic" colour="#5b80a5">
    <block type="controls_if"></block>
    <block type="logic_compare">
      <field name="OP">EQ</field>
    </block>
    <block type="logic_operation">
      <field name="OP">AND</field>
    </block>
    <block type="logic_negate"></block>
    <block type="logic_boolean">
      <field name="BOOL">TRUE</field>
    </block>
    <block type="logic_null"></block>
    <block type="logic_ternary"></block>
  </category>
  <category name="Loops" colour="#5ba55b">
    <block type="controls_repeat_ext">
      <value name="TIMES">
        <shadow type="math_number">
          <field name="NUM">10</field>
        </shadow>
      </value>
    </block>
    <block type="controls_whileUntil">
      <field name="MODE">WHILE</field>
    </block>
    <block type="controls_for">
      <field name="VAR" id="7^+n_3d*dUw_(C$vtNo_">i</field>
      <value name="FROM">
        <shadow type="math_number">
          <field name="NUM">1</field>
        </shadow>
      </value>
      <value name="TO">
        <shadow type="math_number">
          <field name="NUM">10</field>
        </shadow>
      </value>
      <value name="BY">
        <shadow type="math_number">
          <field name="NUM">1</field>
        </shadow>
      </value>
    </block>
    <block type="controls_forEach">
      <field name="VAR" id="u$)o7n/12$IHjBirHzMM">j</field>
    </block>
    <block type="controls_flow_statements">
      <field name="FLOW">BREAK</field>
    </block>
  </category>
  <category name="Math" colour="#5b67a5">
    <block type="math_number">
      <field name="NUM">0</field>
    </block>
    <block type="math_arithmetic">
      <field name="OP">ADD</field>
      <value name="A">
        <shadow type="math_number">
          <field name="NUM">1</field>
        </shadow>
      </value>
      <value name="B">
        <shadow type="math_number">
          <field name="NUM">1</field>
        </shadow>
      </value>
    </block>
    <block type="math_single">
      <field name="OP">ROOT</field>
      <value name="NUM">
        <shadow type="math_number">
          <field name="NUM">9</field>
        </shadow>
      </value>
    </block>
    <block type="math_trig">
      <field name="OP">SIN</field>
      <value name="NUM">
        <shadow type="math_number">
          <field name="NUM">45</field>
        </shadow>
      </value>
    </block>
    <block type="math_constant">
      <field name="CONSTANT">PI</field>
    </block>
    <block type="math_number_property">
      <mutation divisor_input="false"></mutation>
      <field name="PROPERTY">EVEN</field>
      <value name="NUMBER_TO_CHECK">
        <shadow type="math_number">
          <field name="NUM">0</field>
        </shadow>
      </value>
    </block>
    <block type="math_round">
      <field name="OP">ROUND</field>
      <value name="NUM">
        <shadow type="math_number">
          <field name="NUM">3.1</field>
        </shadow>
      </value>
    </block>
    <block type="math_on_list">
      <mutation op="SUM"></mutation>
      <field name="OP">SUM</field>
    </block>
    <block type="math_modulo">
      <value name="DIVIDEND">
        <shadow type="math_number">
          <field name="NUM">64</field>
        </shadow>
      </value>
      <value name="DIVISOR">
        <shadow type="math_number">
          <field name="NUM">10</field>
        </shadow>
      </value>
    </block>
    <block type="math_constrain">
      <value name="VALUE">
        <shadow type="math_number">
          <field name="NUM">50</field>
        </shadow>
      </value>
      <value name="LOW">
        <shadow type="math_number">
          <field name="NUM">1</field>
        </shadow>
      </value>
      <value name="HIGH">
        <shadow type="math_number">
          <field name="NUM">100</field>
        </shadow>
      </value>
    </block>
    <block type="math_random_int">
      <value name="FROM">
        <shadow type="math_number">
          <field name="NUM">1</field>
        </shadow>
      </value>
      <value name="TO">
        <shadow type="math_number">
          <field name="NUM">100</field>
        </shadow>
      </value>
    </block>
    <block type="math_random_float"></block>
  </category>
  <category name="Text" colour="#5ba58c">
    <block type="text">
      <field name="TEXT"></field>
    </block>
    <block type="text_join">
      <mutation items="2"></mutation>
    </block>
    <block type="text_append">
      <field name="VAR" id="c%#m@[|UgMTBM_I#En07">item</field>
      <value name="TEXT">
        <shadow type="text">
          <field name="TEXT"></field>
        </shadow>
      </value>
    </block>
    <block type="text_length">
      <value name="VALUE">
        <shadow type="text">
          <field name="TEXT">abc</field>
        </shadow>
      </value>
    </block>
    <block type="text_isEmpty">
      <value name="VALUE">
        <shadow type="text">
          <field name="TEXT"></field>
        </shadow>
      </value>
    </block>
    <block type="text_indexOf">
      <field name="END">FIRST</field>
      <value name="VALUE">
        <block type="variables_get">
          <field name="VAR" id="o??w?N6Rb2*mx$~t/9j~">text</field>
        </block>
      </value>
      <value name="FIND">
        <shadow type="text">
          <field name="TEXT">abc</field>
        </shadow>
      </value>
    </block>
    <block type="text_charAt">
      <mutation at="true"></mutation>
      <field name="WHERE">FROM_START</field>
      <value name="VALUE">
        <block type="variables_get">
          <field name="VAR" id="o??w?N6Rb2*mx$~t/9j~">text</field>
        </block>
      </value>
    </block>
    <block type="text_getSubstring">
      <mutation at1="true" at2="true"></mutation>
      <field name="WHERE1">FROM_START</field>
      <field name="WHERE2">FROM_START</field>
      <value name="STRING">
        <block type="variables_get">
          <field name="VAR" id="o??w?N6Rb2*mx$~t/9j~">text</field>
        </block>
      </value>
    </block>
    <block type="text_changeCase">
      <field name="CASE">UPPERCASE</field>
      <value name="TEXT">
        <shadow type="text">
          <field name="TEXT">abc</field>
        </shadow>
      </value>
    </block>
    <block type="text_trim">
      <field name="MODE">BOTH</field>
      <value name="TEXT">
        <shadow type="text">
          <field name="TEXT">abc</field>
        </shadow>
      </value>
    </block>
    <block type="text_print">
      <value name="TEXT">
        <shadow type="text">
          <field name="TEXT">abc</field>
        </shadow>
      </value>
    </block>
    <block type="text_prompt_ext">
      <mutation type="TEXT"></mutation>
      <field name="TYPE">TEXT</field>
      <value name="TEXT">
        <shadow type="text">
          <field name="TEXT">abc</field>
        </shadow>
      </value>
    </block>
  </category>
  <category name="Lists" colour="#745ba5">
    <block type="lists_create_with">
      <mutation items="0"></mutation>
    </block>
    <block type="lists_create_with">
      <mutation items="3"></mutation>
    </block>
    <block type="lists_repeat">
      <value name="NUM">
        <shadow type="math_number">
          <field name="NUM">5</field>
        </shadow>
      </value>
    </block>
    <block type="lists_length"></block>
    <block type="lists_isEmpty"></block>
    <block type="lists_indexOf">
      <field name="END">FIRST</field>
      <value name="VALUE">
        <block type="variables_get">
          <field name="VAR" id="hJNWvBq{zT^H$Apxj,*I">list</field>
        </block>
      </value>
    </block>
    <block type="lists_getIndex">
      <mutation statement="false" at="true"></mutation>
      <field name="MODE">GET</field>
      <field name="WHERE">FROM_START</field>
      <value name="VALUE">
        <block type="variables_get">
          <field name="VAR" id="hJNWvBq{zT^H$Apxj,*I">list</field>
        </block>
      </value>
    </block>
    <block type="lists_setIndex">
      <mutation at="true"></mutation>
      <field name="MODE">SET</field>
      <field name="WHERE">FROM_START</field>
      <value name="LIST">
        <block type="variables_get">
          <field name="VAR" id="hJNWvBq{zT^H$Apxj,*I">list</field>
        </block>
      </value>
    </block>
    <block type="lists_getSublist">
      <mutation at1="true" at2="true"></mutation>
      <field name="WHERE1">FROM_START</field>
      <field name="WHERE2">FROM_START</field>
      <value name="LIST">
        <block type="variables_get">
          <field name="VAR" id="hJNWvBq{zT^H$Apxj,*I">list</field>
        </block>
      </value>
    </block>
    <block type="lists_split">
      <mutation mode="SPLIT"></mutation>
      <field name="MODE">SPLIT</field>
      <value name="DELIM">
        <shadow type="text">
          <field name="TEXT">,</field>
        </shadow>
      </value>
    </block>
    <block type="lists_sort">
      <field name="TYPE">NUMERIC</field>
      <field name="DIRECTION">1</field>
    </block>
  </category>
  <category name="Colour" colour="#a5745b">
    <block type="colour_picker">
      <field name="COLOUR">#ff0000</field>
    </block>
    <block type="colour_random"></block>
    <block type="colour_rgb">
      <value name="RED">
        <shadow type="math_number">
          <field name="NUM">100</field>
        </shadow>
      </value>
      <value name="GREEN">
        <shadow type="math_number">
          <field name="NUM">50</field>
        </shadow>
      </value>
      <value name="BLUE">
        <shadow type="math_number">
          <field name="NUM">0</field>
        </shadow>
      </value>
    </block>
    <block type="colour_blend">
      <value name="COLOUR1">
        <shadow type="colour_picker">
          <field name="COLOUR">#ff0000</field>
        </shadow>
      </value>
      <value name="COLOUR2">
        <shadow type="colour_picker">
          <field name="COLOUR">#3333ff</field>
        </shadow>
      </value>
      <value name="RATIO">
        <shadow type="math_number">
          <field name="NUM">0.5</field>
        </shadow>
      </value>
    </block>
  </category>
  <sep></sep>
  <category name="Variables" colour="#a55b80" custom="VARIABLE"></category>
  <category name="Functions" colour="#995ba5" custom="PROCEDURE"></category>
</xml>
      <div id="blocklyDiv" style="height:520px; width: 700px;"></div>
  </div>
    <div class="tab-pane fade show active" id="pills-help" role="tabpanel" aria-labelledby="pills-help-tab">
      <h3> The Delivery Bot Challenge </h3>
      <b>
        Create a bot that pushes the block across to the other side of the field, but make sure to get them across your team lines. Be careful though, because other robots might get in your way!
      </b>
      <p>
        Yellow blocks are worth <code>10 points</code> each, and black blocks are worth <code>20 points</code> each.
      </p>
      <h3>
        Get Started
      </h3>
      <p>
        1. Go to configs and configurate your robot<br>
        2. Give your bot some code! Come back here and take a look at the starter code if stuck or look at the documentations.<br>
        3. <b>Run and test your bot </b>by clicking "Run robot"! <br>
        4. Compete with others by clicking "Play a Match"
      </p>

</code></pre>
      <h3>Starter Code</h3>
      <b> Move forward for 2 seconds </b>
      <pre><code class="javascript">robot.wheels.move(0.5);
await robot.wait(2000);</code></pre>
      <b> Rotate clockwise for 3 seconds </b>
      <pre><code class="javascript">robot.wheels.rotate(0.5);
await robot.wait(3000);</code></pre>
      <b> Rotate until distance sensor detects something </b>
      <pre><code class="javascript">// Assuming the variable name for distance sensor is distanceSensor
robot.parts.distanceSensor.distance = 0; // this resets the sensor
robot.wheels.rotate(0.03);
await robot.parts.distanceSensor.until(distance => distance != 0);</code></pre>
      <b> Move forward until color is detected </b>
      <pre><code class="javascript">robot.parts.distanceSensor.color = "gray";
robot.wheels.move(0.5);
await robot.parts.colorSensor.until(color => color != "gray");</code></pre>
      <b> Move diagonal with mecanum wheel </b>
      <pre><code class="javascript">robot.wheels.move(2,3);
await robot.wait(2000);</code></pre>
    </div>
    <div class="tab-pane fade" id="pills-help2" role="tabpanel" aria-labelledby="pills-help2-tab">
        <h3>robot.wheels</h3>
        <p>
          Reference to the robot's wheels. Robot's movements are controlled by this element.
          <br> Possible types of wheels include <code>NormalWheels</code> and <code>MecanumWheels</code>
      <h4>robot.wheels (NormalWheels)</h4>
      <div class="indented">
        <b>robot.wheels.move(float <i>velocity</i>)</b>
        <p>Makes the robot move forward with given velocity</p>
        <pre><code class="javascript">// Example: move forward at 3px/frame for 200 miliseconds
robot.wheels.move(3);
await robot.wait(200);</code></pre>
      
        <b>robot.wheels.stop()</b>
        <p>Stops the robot. This is automatically called whenever <code>await</code> or <code>robot.wait</code> is used.</p>
      </div>
      <h4>robot.wheels (MecanumWheels)</h4>
      <div class="indented">
        <b>robot.wheels.move(float <i>xVelocity</i>, float <i>yVelocity</i>)</b>
        <p>Moves the robot with the given velocity components.</p>
        <pre><code class="javascript">// Example: move diagonal
robot.wheels.move(1,2);
await robot.wait(200);
      </code></pre>
      </div>
      </p>
    </div>
</div>
      </div>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.0.0/p5.min.js"></script>
    <script src="https://unpkg.com/p5.collide2d"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.7.2/addons/p5.dom.min.js"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script language="javascript" type="text/javascript" src="socket.io-1.4.5.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.12/ace.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.12/mode-javascript.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/matter-js/0.14.2/matter.min.js"></script>
    
    <!-- Blockly -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/blockly/3.20200625.2/blockly_compressed.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/blockly/3.20200625.2/blocks_compressed.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/blockly/3.20200625.2/msg/en.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/blockly/3.20200625.2/javascript_compressed.min.js"></script>


    <script src="wackynames.js"></script>
    <script src="cycle.js"></script>
    <script src="countdown.js"></script>
    <script src="editor.js"></script>
    
    <script src="sketch.js"></script>
    
    <script src="helper.js"></script>
    <script src="wheels.js"></script>
    <script src="raycasting.js"></script>
    <script src="sensors.js"></script>
    <script src="robot.js"></script>
  </body>
</html>

